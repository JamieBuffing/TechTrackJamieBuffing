import{au as I,av as x,a3 as A,X as C,C as R,V as T,h as S,A as Y,a1 as U,aw as z,B as D,G as O,a7 as k,ax as G,U as q,a4 as H,F as K,K as m,ay as $,Q as j,d as w,S as J,az as B,aA as Q,aB as V,f as E,aC as X,an as Z,z as W,aD as ee,aE as ae,l as te,aF as se,aG as re,aH as ie,ao as ne,j as fe,aI as ce,aJ as ue,aK as de}from"./BplkUxLQ.js";class L{anchor;#a=new Map;#t=new Map;#e=new Map;#s=!0;constructor(e,s=!0){this.anchor=e,this.#s=s}#r=()=>{var e=I;if(this.#a.has(e)){var s=this.#a.get(e),r=this.#t.get(s);if(r)x(r);else{var i=this.#e.get(s);i&&(this.#t.set(s,i.effect),this.#e.delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,f]of this.#a){if(this.#a.delete(a),a===e)break;const n=this.#e.get(f);n&&(A(n.effect),this.#e.delete(f))}for(const[a,f]of this.#t){if(a===s)continue;const n=()=>{if(Array.from(this.#a.values()).includes(a)){var d=document.createDocumentFragment();U(f,d),d.append(R()),this.#e.set(a,{effect:f,fragment:d})}else A(f);this.#t.delete(a)};this.#s||!r?C(f,n,!1):n()}}};#i=e=>{this.#a.delete(e);const s=Array.from(this.#a.values());for(const[r,i]of this.#e)s.includes(r)||(A(i.effect),this.#e.delete(r))};ensure(e,s){var r=I,i=z();if(s&&!this.#t.has(e)&&!this.#e.has(e))if(i){var a=document.createDocumentFragment(),f=R();a.append(f),this.#e.set(e,{effect:T(()=>s(f)),fragment:a})}else this.#t.set(e,T(()=>s(this.anchor)));if(this.#a.set(r,e),i){for(const[n,c]of this.#t)n===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[n,c]of this.#e)n===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#r),r.ondiscard(this.#i)}else S&&(this.anchor=Y),this.#r()}}function oe(t,e,s=!1){S&&D();var r=new L(t),i=s?k:0;function a(f,n){if(S){const d=G(t)===q;if(f===d){var c=H();K(c),r.anchor=c,m(!1),r.ensure(f,n),m(!0);return}}r.ensure(f,n)}O(()=>{var f=!1;e((n,c=!0)=>{f=!0,a(c,n)}),f||a(!1,null)},i)}function le(t,e,s){S&&D();var r=new L(t);O(()=>{var i=e()??null;r.ensure(i,i&&(a=>s(a,i)))},k)}function y(t,e){return t===e||t?.[B]===e}function ve(t={},e,s,r){return $(()=>{var i,a;return j(()=>{i=a,a=[],w(()=>{t!==s(...a)&&(e(t,...a),i&&y(s(...i),t)&&e(null,...i))})}),()=>{J(()=>{a&&y(s(...a),t)&&e(null,...a)})}}),t}let b=!1;function he(t){var e=b;try{return b=!1,[t(),b]}finally{b=e}}function be(t,e,s,r){var i=!te||(s&se)!==0,a=(s&re)!==0,f=(s&de)!==0,n=r,c=!0,d=()=>(c&&(c=!1,n=f?w(r):r),n),_;if(a){var M=B in t||ne in t;_=Q(t,e)?.set??(M&&e in t?u=>t[e]=u:void 0)}var o,P=!1;a?[o,P]=he(()=>t[e]):o=t[e],o===void 0&&r!==void 0&&(o=d(),_&&(i&&ce(),_(o)));var h;if(i?h=()=>{var u=t[e];return u===void 0?d():(c=!0,u)}:h=()=>{var u=t[e];return u!==void 0&&(n=void 0),u===void 0?n:u},i&&(s&V)===0)return h;if(_){var F=t.$$legacy;return(function(u,v){return arguments.length>0?((!i||!v||F||P)&&_(v?h():u),u):h()})}var g=!1,l=((s&ue)!==0?fe:ae)(()=>(g=!1,h()));a&&E(l);var N=W;return(function(u,v){if(arguments.length>0){const p=v?E(l):i&&a?X(u):u;return Z(l,p),g=!0,n!==void 0&&(n=p),u}return ie&&g||(N.f&ee)!==0?l.v:E(l)})}export{ve as b,le as c,oe as i,be as p};
